# ğŸƒã€ŠJest å®è·µæŒ‡å—ã€‹

[![Coverage Status](https://coveralls.io/repos/github/haixiangyan/jest-tutorial-example/badge.svg?branch=main)](https://coveralls.io/github/haixiangyan/jest-tutorial?branch=main)
![](https://visitor-badge.glitch.me/badge?page_id=jest-tutorial)

[ã€ŠJest å®è·µæŒ‡å—ã€‹è®¿é—®é“¾æ¥](https://github.yanhaixiang.com/jest-tutorial/)

<img src="./cover.jpeg" width="300"/>

## å‰è¨€

[Jest](https://jestjs.io/) çœ‹ä¼¼å¾ˆç®€å•ï¼Œå°±åƒå¾ˆå¤šåšå®¢å†™çš„é‚£æ ·ï¼š

```js
expect(sum(1, 1)).toEqual(2)
```

ç„¶è€Œåœ¨çœŸå®ä¸šåŠ¡ä¸­ï¼Œå†™å‡ºä¸€ä¸ªå¥½æµ‹è¯•çš„éš¾åº¦å¹¶æ²¡æœ‰å¤§å®¶æƒ³çš„é‚£ä¹ˆä½ã€‚æˆ‘æ€»ç»“äº†ä¸€ä¸‹å†™æµ‹è¯•çš„å‡ ä¸ªéš¾ç‚¹ï¼š

**ä¸ä¼šé…ç½®ã€‚** Jest çš„ä¸Šæ‰‹æ–‡æ¡£éå¸¸ç®€å•ï¼Œç”šè‡³ä¸éœ€è¦é…ç½®ã€‚ä½†çœŸå®æƒ…å†µæ˜¯åªè¦ä¸€ä¸ªé…ç½®æ²¡é…å¥½ï¼Œæ‰€æœ‰æµ‹è¯•éƒ½è·‘ä¸èµ·æ¥ã€‚æµ‹è¯•ä¸åƒå¼€å‘ï¼Œä»£ç æœ‰é—®é¢˜å¯ä»¥æ…¢æ…¢è°ƒã€‚
æµ‹è¯•æ˜¯ä¸€ä¸ª 0 - 1 æ¸¸æˆï¼Œä¸æ˜¯æˆåŠŸå°±æ˜¯å¤±è´¥ï¼ŒæŒ«è´¥æ„Ÿéå¸¸å¼ºã€‚

**ä¸çŸ¥é“è¦æ€ä¹ˆ Mockã€‚** è¿™ä¸ªç»å¯¹æ˜¯ç»å…¸ä¸­çš„ç»å…¸ã€‚è™½ç„¶å®˜æ–¹æ–‡æ¡£æœ‰æ•™ç¨‹ï¼Œä½†æ˜¯çœŸå®çš„ä¸šåŠ¡å¾€å¾€ä¸æ˜¯é‚£ä¹ˆç†æƒ³ï¼Œè¿œæ¯”æ–‡æ¡£è¦å¤æ‚çš„å¤šã€‚

**ä¸ä¼šæ„é€ æµ‹è¯•ç”¨ä¾‹ã€‚** åˆšæ¥è§¦æµ‹è¯•æ—¶ï¼Œå¾ˆå®¹æ˜“æŠŠåšä¸šåŠ¡é‚£å¥— â€œå®ç° XXX åŠŸèƒ½â€ çš„æƒ³æ³•ä»£å…¥æµ‹è¯•ã€‚ä½†æµ‹è¯•çš„é‡ç‚¹ä¸åœ¨äºå®ç°åŠŸèƒ½ï¼Œè€Œæ˜¯æ„é€ ç”¨ä¾‹ã€‚

**æ²¡æœ‰æµ‹è¯•ç­–ç•¥ã€‚** ä¸Šé¢æ˜¯ â€œæŠ€â€ çš„éš¾ç‚¹ï¼Œæµ‹è¯•è¿˜æœ‰ â€œæœ¯â€ çš„éš¾ç‚¹ã€‚é—·ç€å¤´ä¸€é€šè‚æµ‹è¯•ä»£ç å¹¶ä¸é«˜æ•ˆï¼Œä½¿ç”¨åˆé€‚çš„æµ‹è¯•ç­–ç•¥è¿œæ¯”å†™ 10 ä¸ªæµ‹è¯•ç”¨ä¾‹é‡è¦ã€‚

ä¸Šé¢è¿™äº›é—®é¢˜å¾ˆå®¹æ˜“è®©äººå†™å‡ºéš¾ä»¥ç»´æŠ¤å’Œå¤æ‚çš„æµ‹è¯•ã€‚åªè¦ä¸šåŠ¡ä¸€æ”¹ï¼Œä¸ä»…è¦ç»´æŠ¤ä¸šåŠ¡ä»£ç è¿˜è¦ç»´æŠ¤æµ‹è¯•ä»£ç ã€‚
è¿™æ—¶ï¼Œä½ ä¸ç¦æ„Ÿå¹ï¼šâ€œæµ‹è¯•çœŸæµªè´¹æ—¶é—´â€ï¼Œæœ€ç»ˆæ”¾å¼ƒå†™æµ‹è¯•ï¼Œç›´æ¥å¼€æ‘†ã€‚

**å¥½çš„æµ‹è¯•ä¼šè®©ä½ è·å¾—å¾ˆé«˜çš„ä»£ç ä¿¡å¿ƒï¼Œè€Œä¸å¥½çš„æµ‹è¯•åˆ™ä¼šä¸¥é‡æ‹–å®é¡¹ç›®å¼€å‘ã€‚æ‰€ä»¥ï¼Œå¤§å®¶æ‰€åŒæ¶çš„ä¸åº”è¯¥æ˜¯æµ‹è¯•æœ¬èº«ï¼Œè€Œæ˜¯é‚£äº›ç»´æŠ¤æ€§å·®çš„æµ‹è¯•ã€‚**

## ç›®çš„

æˆ‘åœ¨ç½‘ä¸Šç¿»æ‰¾å…³äºå‰ç«¯æµ‹è¯•çš„èµ„æ–™æ—¶ï¼Œæˆ‘å‘ç°çœŸçš„å¤ªå°‘äº†ï¼Œå‡ ä¹å¯ä»¥åˆ†ä¸ºå‡ ç±»ï¼š

1. **å…¥é—¨ç±»ã€‚** å®‰è£… Jestï¼Œå¤–åŠ  `expect(1 + 1).toEqual(2)` å°ä¾‹å­
2. **API è¯´æ˜ä¹¦ç±»ã€‚** ç±»ä¼¼äºæŠŠ Jest å®˜ç½‘æŠ„äº†ä¸€é
3. **ç†è®ºç±»ã€‚** æ˜¯ä»€ä¹ˆã€ä¸ºä»€ä¹ˆã€æµ‹è¯•åˆ†ç±»ç­‰ï¼Œä½†æœ€é‡è¦çš„ â€œæ€ä¹ˆåšâ€ æ²¡æœ‰è¯´

å¹¶ä¸æ˜¯è¯´è¿™äº›æ–‡ç« ä¸å¥½ï¼Œåªæ˜¯ï¼Œè¿™äº›æ–‡ç« å¤§å¤šæ•°åœç•™åœ¨æœ€åˆçº§ï¼Œå¾ˆä¸åˆ©äºå…¶å®ƒåŒå­¦æ¥å­¦ä¹ ä¸€é—¨æ–°æŠ€æœ¯ã€‚

åŒæ—¶ï¼Œæˆ‘è¿˜æ‹œè®¿äº†ä¸€ä¸‹ [Jest çš„å®˜ç½‘](https://jestjs.io/zh-Hans/) ã€‚æ²¡æƒ³åˆ°ï¼Œéƒ½ 2022 å¹´äº†ï¼Œä¸­æ–‡ç¿»è¯‘ä¾ç„¶è¿™ä¹ˆéš¾çœ‹ï¼š

![](./docs/bad-translation.png)

å…ˆä¸è¯´ç¿»è¯‘çš„æ­£ç¡®æ€§å¦‚ä½•ï¼Œå•çœ‹è¿™ä¸­æ–‡çš„å†…å®¹å°±è®©äººæ²¡æœ‰æƒ³çœ‹ä¸‹å»çš„æ¬²æœ›ï¼ŒçœŸå¸Œæœ› Jest èƒ½æ‰¾ç¨å¾®ä¸“ä¸šä¸€ç‚¹çš„äººæ¥åšç¿»è¯‘ã€‚
ç”±äºå®˜ç½‘çš„ä¸­æ–‡ç¿»è¯‘åšçš„å®åœ¨å¤ªçƒ‚ï¼Œé‡åˆ°é—®é¢˜å‡ ä¹åœ¨ä¸­æ–‡ç¤¾åŒºæ˜¯æ‰¾ä¸åˆ°çš„ã€‚

ç»ˆäºï¼Œæˆ‘çœ‹åˆ°äº† React Testing Library ä½œè€… Kent C. Dodds çš„ [åšå®¢](https://kentcdodds.com/) ã€‚

![](./docs/kentcdodds.png)

ä»–å†™äº†å¾ˆå¤šå…³äºæµ‹è¯•æ€è·¯çš„æ–‡ç« ï¼Œæ¯ä¸€ç¯‡éƒ½éå¸¸ç²¾å½©ã€‚**å—ä»–çš„å¯å‘ï¼Œæˆ‘è§‰å¾—æœ‰å¿…è¦æŠŠè¿™äº›æ€æƒ³å’ŒæŠ€å·§åˆ†äº«å‡ºæ¥ï¼Œæœ€ç»ˆå½¢æˆäº†è¿™æœ¬å°ä¹¦ã€‚**


## å†…å®¹

> æ­¤æ¬¡æ•™ç¨‹ä¸»è¦åˆ†äº«æµ‹è¯•çš„æ€è·¯ä¸ºä¸»ï¼Œè™½ç„¶ä»¥ React ä¸ºä¸»è¦æŠ€æœ¯æ ˆï¼Œä½†ä½¿ç”¨å…¶å®ƒæŠ€æœ¯æ ˆçš„è¯»è€…ä¾ç„¶å¯ä»¥æµç•…é˜…è¯»ã€‚

**æœ¬æ•™ç¨‹æ˜¯æˆ‘ç»“åˆäº†è‡ªèº«å®è·µã€Kent C. Dodds æ–‡ç« ã€StackOverflowã€Github Issue ä»¥åŠåˆ«çš„åšå®¢æœ€ç»ˆæ€»ç»“å‡ºæ¥çš„ä¸€å¥—å®è·µæŒ‡å—ã€‚**

å°ä¹¦åŒ…å« 3 éƒ¨åˆ†ï¼š

**åŸºç¡€å®è·µã€‚** ä» 0 åˆ° 1 å†™é¡¹ç›®å’Œæµ‹è¯•ï¼Œæ¯ä¸€ç« ä¼šé€šè¿‡ä¸€ä¸ªä¸šåŠ¡ä¾‹å­æ¥åˆ†äº«æµ‹è¯•éš¾ç‚¹ã€è§£æ³•å’Œæ€è·¯ã€‚

**[é…å¥—é¡¹ç›®](https://github.com/haixiangyan/jest-tutorial-example)ã€‚** å¦‚æœä½ åœ¨æŸä¸€æ­¥å¡å£³äº†ï¼Œä¹Ÿå¯ä»¥å‚è€ƒè¿™ä¸ªé¡¹ç›®ã€‚

**æµ‹è¯•æ€è·¯ã€‚** åˆ†äº«ä¸€äº› Kent çš„æ–‡ç« ï¼ˆä¸­æ–‡ç¿»è¯‘ï¼‰ä»¥åŠæµ‹è¯•æ€»ç»“ã€‚

## æ±‚å…³æ³¨

**è¿™æ•™ç¨‹ + é…å¥—é¡¹ç›®å†™äº† 3 å‘¨ï¼Œè¯´å®è¯æŒºç´¯çš„ã€‚åŸåˆ›ä¸æ˜“ï¼Œæ‰“èµå°±ä¸å¿…äº†ï¼Œè§‚ä¼—è€çˆ·çœç€å§ã€‚åªæ±‚å¤§å®¶å¤šå…³æ³¨ä¸€ä¸‹æˆ‘çš„æ–°å…¬ä¼—å·ã€å†™ä»£ç çš„æµ·æ€ªã€‘ã€‚**

![](./docs/qrcode.gif)
